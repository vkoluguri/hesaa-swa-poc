<!-- pdf.html -->
<main class="wrap">
  <h1 id="pdfTitle" style="margin: 16px 0;"></h1>
  <iframe id="pdfFrame" style="width:100%;height:80vh;border:0;border-radius:12px;box-shadow:0 6px 24px rgba(0,0,0,.08)"></iframe>
</main>

<script>
  // Example: /pdf.html?doc=Shared Documents/course completion.pdf
  const p = new URLSearchParams(location.search);
  const file = p.get('doc');
  if (file) {
    document.getElementById('pdfTitle').textContent = file.split('/').pop();
    // IMPORTANT: encode each segment to preserve spaces
    const src = '/api/pdf?file=' + file.split('/').map(encodeURIComponent).join('/');
    document.getElementById('pdfFrame').src = src;
  } else {
    document.getElementById('pdfTitle').textContent = 'Missing ?doc=...';
  }
</script>
